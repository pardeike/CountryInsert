<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Higher / Lower Countries</title>
  <style>
    body{font-family:sans-serif;display:flex;flex-direction:column;align-items:center;margin:0;padding:20px;background:#f0f0f0}
    #game{display:flex;gap:20px}
    #sorted{background:#fff;padding:10px;border:1px solid #ccc;min-width:200px;min-height:300px;display:flex;flex-direction:column;position:relative}
    #next{background:#fff;padding:10px;border:1px solid #ccc;min-width:120px;min-height:150px;display:flex;align-items:center;justify-content:center}
    .card{width:100px;height:140px;border:1px solid #333;display:flex;flex-direction:column;align-items:center;justify-content:center;background:#fff;cursor:grab;transition:transform 0.3s;position:relative;perspective:600px;margin:5px auto}
    .card.flipped .front{transform:rotateY(180deg)}
    .card.flipped .back{transform:rotateY(0)}
    .front,.back{width:100%;height:100%;backface-visibility:hidden;position:absolute;top:0;left:0;display:flex;flex-direction:column;align-items:center;justify-content:center;transition:transform 0.3s}
    .front{transform:rotateY(0)}
    .back{transform:rotateY(-180deg)}
    .dropzone{height:20px;margin:2px 0;border:2px dashed #aaa}
    #message{margin-top:20px;font-size:24px}
    #restart{margin-top:10px;padding:10px 20px;font-size:16px}
  </style>
</head>
<body>
  <div id="game">
    <div id="sorted"></div>
    <div id="next"></div>
  </div>
  <div id="message"></div>
  <button id="restart" style="display:none;">Start Over</button>
  <script>
    const data=[{name:"China",flag:"ðŸ‡¨ðŸ‡³",population:1400000000},{name:"India",flag:"ðŸ‡®ðŸ‡³",population:1380000000},{name:"USA",flag:"ðŸ‡ºðŸ‡¸",population:330000000},{name:"Indonesia",flag:"ðŸ‡®ðŸ‡©",population:270000000},{name:"Pakistan",flag:"ðŸ‡µðŸ‡°",population:220000000},{name:"Brazil",flag:"ðŸ‡§ðŸ‡·",population:210000000},{name:"Nigeria",flag:"ðŸ‡³ðŸ‡¬",population:200000000},{name:"Bangladesh",flag:"ðŸ‡§ðŸ‡©",population:166000000},{name:"Russia",flag:"ðŸ‡·ðŸ‡º",population:146000000},{name:"Mexico",flag:"ðŸ‡²ðŸ‡½",population:128000000},{name:"Japan",flag:"ðŸ‡¯ðŸ‡µ",population:126000000},{name:"Ethiopia",flag:"ðŸ‡ªðŸ‡¹",population:114000000},{name:"Philippines",flag:"ðŸ‡µðŸ‡­",population:108000000},{name:"Egypt",flag:"ðŸ‡ªðŸ‡¬",population:102000000}];
    let pool=[],sortedList=[],current;
    function shuffle(a){for(let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]]}return a}
    function startGame(){pool=shuffle(data.slice());sortedList=[];document.getElementById("message").textContent="";document.getElementById("restart").style.display="none";document.getElementById("sorted").innerHTML="";document.getElementById("next").innerHTML="";let card=pool.pop();sortedList.push(card);renderSorted();loadNext()}
    function renderSorted(){const s=document.getElementById("sorted");s.innerHTML="";for(let i=0;i<=sortedList.length;i++){let dz=document.createElement("div");dz.className="dropzone";dz.dataset.index=i;dz.addEventListener("dragover",e=>{e.preventDefault()});dz.addEventListener("drop",dropHandler);s.appendChild(dz);if(i<sortedList.length){s.appendChild(createCard(sortedList[i],true))}}}
    function createCard(c,flip){let d=document.createElement("div");d.className="card"+(flip?" flipped":"");d.dataset.pop=c.population;d.innerHTML='<div class="front"><div>'+c.flag+'</div><div>'+c.name+'</div></div><div class="back"><div>'+c.population+'</div></div>';return d}
    function loadNext(){if(!pool.length){win();return} current=pool.pop();let n=document.getElementById("next");n.innerHTML="";let card=createCard(current,false);card.draggable=true;card.addEventListener("dragstart",e=>{e.dataTransfer.setData("text/plain","card")});n.appendChild(card)}
    function dropHandler(e){e.preventDefault();let idx=+this.dataset.index;let valid=(idx===0||sortedList[idx-1].population<=current.population)&&(idx===sortedList.length||current.population<=sortedList[idx].population);if(valid){sortedList.splice(idx,0,current);if(sortedList.length-1===10){win();return}else{renderSorted();loadNext()}}else{this.style.borderColor="red";gameOver(idx)}}
    function gameOver(idx){document.getElementById("next").firstChild.classList.add("flipped");let adj=idx>0?idx-1:idx;if(document.getElementById("sorted").children[adj*2+1])document.getElementById("sorted").children[adj*2+1].classList.add("flipped");document.getElementById("message").textContent="Game Over";document.getElementById("restart").style.display="block"}
    function win(){document.getElementById("message").textContent="You Won!";document.querySelectorAll("#sorted .card").forEach(c=>c.classList.add("flipped"));document.getElementById("next").innerHTML="";document.getElementById("restart").style.display="block"}
    document.getElementById("restart").addEventListener("click",startGame);
    startGame();
  </script>
</body>
</html>